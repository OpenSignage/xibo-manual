<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>[[PRODUCTNAME]] ユーザーマニュアル</title>
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- favicon -->
        <link href="../img/favicon.ico" rel="shortcut icon"/>

        <!-- Bootstrap -->
        <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        
        <!-- Stylesheets -->
        <link href="../manual.css" rel="stylesheet" media="screen">

	<!-- Font Awsome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">

	<!-- Google search script -->
	<script async src="https://cse.google.com/cse.js?cx=d28d4d10e87c6439f"></script>

        <!-- META -->
        <meta name="keywords" content="digital signage, デジタルサイネージ, signage, サイネージ, sigme, xibo, open source, オープンソース, agpl, documentation, マニュアル" />
        <meta name="description" content="[[PRODUCTNAME]] は、オープンソースのデジタルサイネージソリューションです。主要なメディアタイプをすべてサポートし、CSV、データベース、RSSを使用して他のデータソースと連動させることができます。" />
    </head>
    <body data-toc="[[TOCNAME]]">
        <!-- Copyright 2020 Xibo Signage Ltd. Part of the Xibo Open Source Digital Signage Solution. Released under the AGPLv3 or later. And Portion Copyright 2025 Open Source Digital Signage Initiative. -->
        <nav id="top-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <img class="img-responsive logo leftflush header-logo" src="../img/sigme.png" alt="[[PRODUCTNAME]]" style="margin-right:20px"/>
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#ss-navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse" id="ss-navbar">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#"> ユーザーマニュアル</a></li>
<!--
                        <li><a href="/admin-manual/ja/"> 管理者マニュアル</a></li>
                        <li><a href="/dev-manual/ja/"> 開発者マニュアル</a></li>
                        <li><a href="/creator-guide/ja/"> クリエーターガイド</a></li>
			<li><div class="fill-space">&nbsp;></div></li>
-->
                        <li class="navbar-right"><div class="gcse-search"></div></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="ss_body container">
            <div class="row">
                <div class="col-md-3">
                    <ul id="side-nav" class="nav nav-pills nav-stacked">
                        [[NAVBAR]]
                    </ul>
                </div>
                <div class="col-md-7" role="main">
                    [[PAGE]]
                </div>
                <div class="col-md-2" role="toc">
                    <div class="toc_container">
                        [[TOC]]
                        <button id="open-popup">AIアシスタント</button>
                    </div>
                    <script>
                        // Store popup window reference as a global variable
                        let popupWindow = null;
                        
                        document.getElementById('open-popup').addEventListener('click', () => {
                        const popupWidth = 400;
                        const popupHeight = 600;

                        // Get parent window size and position
                        const parentWindow = window.opener || window; // Get parent window
                        
                        // Inner size of the window
                        const parentWidth = parentWindow.innerWidth;
                        const parentHeight = parentWindow.innerHeight;
                        
                        // Window position on screen (top-left corner coordinates)
                        const parentLeft = parentWindow.screenX || parentWindow.screenLeft || 0;
                        const parentTop = parentWindow.screenY || parentWindow.screenTop || 0;
                        
                        // Consider scroll position
                        const scrollX = parentWindow.scrollX || parentWindow.pageXOffset || 0;
                        const scrollY = parentWindow.scrollY || parentWindow.pageYOffset || 0;

                        // Calculate popup window position (place at bottom-right)
                        // Right edge of window
                        const right = parentLeft + parentWidth;
                        // Bottom edge of window
                        const bottom = parentTop + parentHeight;
                        
                        // Top-left coordinates for popup (relative to window's bottom-right)
                        const left = right - popupWidth - 20; // Add some margin
                        const top = bottom - popupHeight - 20; // Add some margin

                        // Check if popup is already open
                        if (popupWindow && !popupWindow.closed) {
                            // If already open, move focus to it
                            popupWindow.focus();
                            // Update position if needed
                            popupWindow.moveTo(left, top);
                        } else {
                            // Open new popup window
                            popupWindow = window.open('../ai/assistant.html', 'popup', `width=${popupWidth},height=${popupHeight},left=${left},top=${top},menubar=no,toolbar=no,location=no,status=no,resizable=yes,scrollbars=no`);
                        }
                        });
                    </script>
                </div>
            </div>
        </div> <!-- container-->
